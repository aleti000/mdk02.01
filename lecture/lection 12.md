# Лекция 12: Базы данных

## Цели и задачи
- Изучить основные принципы работы с базами данных.
- Разобраться с ролью MariaDB/MySQL в Linux.
- Научиться устанавливать и настраивать MariaDB.
- Понять процесс создания таблиц, выполнения запросов и управления данными.
- Изучить диагностику и устранение неисправностей в работе баз данных.

---

## Основной материал

### 1. Введение в базы данных

#### Что такое база данных?
База данных — это организованная коллекция данных, которая позволяет хранить, извлекать и управлять информацией. Базы данных широко используются для веб-приложений, аналитики, систем учета и других задач.

#### Зачем нужны базы данных?
- Хранение больших объемов данных.
- Удобное управление данными через SQL (Structured Query Language).
- Поддержка многопользовательского доступа.
- Обеспечение целостности данных.

#### Основные типы баз данных:
1. **Реляционные**: Данные хранятся в виде таблиц (MariaDB, MySQL, PostgreSQL).
2. **Нереляционные**: Данные хранятся в виде документов или ключ-значение (MongoDB, Redis).

---

### 2. Установка и настройка MariaDB

#### Что такое MariaDB?
MariaDB — это свободная реляционная СУБД (система управления базами данных), созданная как форк MySQL. Она полностью совместима с MySQL и предлагает дополнительные функции.

#### Установка MariaDB
Для установки MariaDB в Linux используется пакетный менеджер. Например, в Ubuntu:

1. Обновите список пакетов:
   apt update
2. Установите MariaDB:
   apt install mariadb-server

#### Запуск службы
После установки запустите службу:
systemctl start mariadb

Добавьте службу в автозагрузку:
systemctl enable mariadb

#### Безопасная настройка
Для повышения безопасности выполните скрипт:
mysql_secure_installation

Этот скрипт позволяет:
- Установить пароль для root.
- Удалить анонимных пользователей.
- Отключить удаленный доступ для root.
- Удалить тестовую базу данных.

---

### 3. Работа с MariaDB

#### Подключение к серверу
Подключитесь к MariaDB с правами root:
mysql -u root -p

#### Создание базы данных
Создайте новую базу данных:
CREATE DATABASE example_db;

#### Создание пользователя
Создайте нового пользователя и назначьте ему права:
CREATE USER 'example_user'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON example_db.* TO 'example_user'@'localhost';

#### Применение изменений
Примените изменения прав:
FLUSH PRIVILEGES;

#### Выход из MariaDB
Выйдите из интерфейса MariaDB:
exit

---

### 4. Создание таблиц и работа с данными

#### Создание таблицы
Подключитесь к базе данных:
USE example_db;

Создайте таблицу:
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50),
    email VARCHAR(50)
);

#### Вставка данных
Добавьте данные в таблицу:
INSERT INTO users (name, email) VALUES ('Alice', 'alice@example.com');
INSERT INTO users (name, email) VALUES ('Bob', 'bob@example.com');

#### Выборка данных
Просмотрите данные в таблице:
SELECT * FROM users;

#### Обновление данных
Измените данные в таблице:
UPDATE users SET email = 'alice_new@example.com' WHERE name = 'Alice';

#### Удаление данных
Удалите запись из таблицы:
DELETE FROM users WHERE name = 'Bob';

---

### 5. Диагностика и устранение неисправностей

#### Проверка статуса службы
Проверьте статус службы MariaDB:
systemctl status mariadb

#### Просмотр логов
Логи MariaDB находятся в каталоге /var/log/mysql:
tail -f /var/log/mysql/error.log

#### Распространенные проблемы:
- Неправильные права доступа к файлам базы данных.
- Ошибки подключения из-за неправильной конфигурации.
- Проблемы с производительностью при большом объеме данных.

---

### 6. Безопасность баз данных

#### Защита MariaDB
1. Используйте сложные пароли для пользователей.
2. Ограничьте доступ только с доверенных IP-адресов:
   GRANT ALL PRIVILEGES ON example_db.* TO 'example_user'@'192.168.1.10';
3. Регулярно создавайте резервные копии:
   mysqldump -u root -p example_db > example_db_backup.sql

#### Восстановление базы данных
Восстановите базу данных из резервной копии:
mysql -u root -p example_db < example_db_backup.sql

---

## Домашнее задание
1. Установите и настройте MariaDB на виртуальной машине.
2. Создайте базу данных и таблицу.
3. Добавьте несколько записей в таблицу и выполните выборку данных.
4. Создайте резервную копию базы данных и восстановите ее.
5. Изучите логи MariaDB и найдите записи о запросах.

---

## Вопросы для самопроверки
1. Что такое база данных и для чего она используется?
2. Как установить и настроить MariaDB в Linux?
3. Как создать базу данных и таблицу в MariaDB?
4. Как выполнять запросы к базе данных?
5. Какие меры безопасности можно применить для защиты базы данных?
