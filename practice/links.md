

# Лабораторная работа Жесткие и символические ссылки в Linux

---

## Цель работы:
Изучить механизм создания и использования жестких и символических ссылок в Linux, научиться работать с ними в командной строке, а также понять их различия и сферу применения.

---

## Оборудование и ПО:
- Операционная система: Linux (например, Ubuntu, CentOS)
- Терминал (например, GNOME Terminal, Konsole)
- Базовые права пользователя (для создания файлов и ссылок)

---

## Теоретическая часть

### 1. Основные понятия:
- **Жесткая ссылка (Hard Link)**:
  - Указывает на **inode** файла (тоже самое, что и исходный файл).
  - Множество имен для одного файла.
  - Не может быть создана для директорий.
  - Если исходный файл удален, ссылка остается доступной, пока есть другие жесткие ссылки.
  - Не работает с удаленными файлами (например, удаленным через `rm`).

- **Символическая ссылка (Symbolic Link или Symlink)**:
  - Указывает на **путь** к файлу или директории (может быть относительным или абсолютным).
  - Может ссылаться на директории и удаленные файлы.
  - Если исходный файл удален, ссылка становится "битой" (broken link).
  - Поддерживает символические ссылки на символические ссылки.

### 2. Ключевые команды:
| Команда | Описание |
|---------|----------|
| `ln` | Создание ссылок: <br> `ln исходный_файл ссылка` (жесткая ссылка) <br> `ln -s исходный_файл ссылка` (символическая ссылка) |
| `ls -l` | Просмотр ссылок: символические ссылки отображаются с `->` |
| `rm` | Удаление ссылки (не удаляет исходный файл) |
| `file` | Проверка типа файла (например: `file ссылка`) |

---

## Практическая часть

### Задание 1. Создание и анализ жестких ссылок
**Цель:** Понять поведение жестких ссылок.

1. Создайте файл:
   ```bash
   echo "Это тестовый файл" > original.txt
   ```

2. Создайте жесткую ссылку:
   ```bash
   ln original.txt hard_link.txt
   ```

3. Проверьте inode файлов:
   ```bash
   ls -i original.txt hard_link.txt
   ```
   *Результат:* Оба файла имеют **одинаковый inode**.

4. Удалите исходный файл:
   ```bash
   rm original.txt
   ```

5. Проверьте доступность данных через ссылку:
   ```bash
   cat hard_link.txt
   ```
   *Результат:* Данные доступны, так как жесткая ссылка сохраняет inode.

---

### Задание 2. Создание и анализ символических ссылок
**Цель:** Понять особенности символических ссылок.

1. Создайте символическую ссылку:
   ```bash
   ln -s original.txt symlink.txt
   ```

2. Проверьте тип ссылки:
   ```bash
   ls -l symlink.txt
   ```
   *Результат:* Строка будет содержать `-> original.txt`.

3. Удалите исходный файл:
   ```bash
   rm original.txt
   ```

4. Попробуйте прочитать символическую ссылку:
   ```bash
   cat symlink.txt
   ```
   *Результат:* Ошибка "No such file or directory".

---

### Задание 3. Работа с директориями
**Цель:** Проверить ограничения жестких ссылок на директории.

1. Создайте директорию:
   ```bash
   mkdir my_dir
   ```

2. Попробуйте создать жесткую ссылку на директорию:
   ```bash
   ln my_dir hard_link_dir
   ```
   *Результат:* Ошибка `ln: cannot create hard link... Operation not permitted`.

3. Создайте символическую ссылку на директорию:
   ```bash
   ln -s my_dir symlink_dir
   ```

4. Проверьте доступность:
   ```bash
   ls -l symlink_dir
   ```
   *Результат:* Символическая ссылка успешно указывает на директорию.

---

### Задание 4. Перемещение исходного файла
**Цель:** Проверить поведение ссылок при перемещении файла.

1. Создайте файл и ссылки:
   ```bash
   echo "Тест" > file.txt
   ln file.txt hard_link.txt
   ln -s file.txt symlink.txt
   ```

2. Переместите исходный файл:
   ```bash
   mv file.txt new_file.txt
   ```

3. Проверьте ссылки:
   ```bash
   cat hard_link.txt  # Данные доступны (жесткая ссылка на inode)
   cat symlink.txt    # Ошибка (ссылка указывает на старый путь)
   ```

---

### Задание 5. Символические ссылки на другие ссылки
**Цель:** Убедиться в поддержке цепочек ссылок.

1. Создайте цепочку:
   ```bash
   ln -s file.txt link1
   ln -s link1 link2
   ```

2. Проверьте путь:
   ```bash
   ls -l link2
   ```
   *Результат:* `link2 -> link1`.

---

## Контрольные вопросы
1. В чем разница между жесткой и символической ссылкой?
2. Почему нельзя создать жесткую ссылку на директорию?
3. Что произойдет с жесткой ссылкой, если исходный файл удален?
4. Как проверить, является ли файл ссылкой?
5. Когда лучше использовать символическую ссылку, а когда жесткую?

---

## Ожидаемые результаты:
1. Умение создавать и удалять жесткие и символические ссылки.
2. Понимание поведения ссылок при удалении/перемещении исходных файлов.
3. Практическое применение ссылок в управлении файловой системой.

---

## Дополнительные задания (опционально):
1. Создайте символическую ссылку на удаленный файл (например, `/etc/passwd`).
2. Проверьте, как влияют права доступа (chmod) на исходный файл и ссылки.
3. Создайте цепочку из трех символьных ссылок и проверьте их работоспособность.

---

## Вывод:
В ходе работы вы изучили основные типы ссылок в Linux, научились их создавать и управлять. Жесткие ссылки полезны для организации множества имен для одного файла, а символические — для гибкого указания на файлы и директории. Понимание этих механизмов необходимо для администрирования и разработки в Linux-окружении.

---

**Примечание:** Все операции выполняйте в отдельном тестовом каталоге. Для проверки используйте команды `ls -li` (для просмотра inode) и `file`.
